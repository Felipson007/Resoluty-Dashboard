(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[642],{19463:function(e,t,r){Promise.resolve().then(r.bind(r,33465))},33465:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return X}});var i=r(57437),s=r(99098),a=r(2265),n=r(92253),o=r(78693),l=r(15273),c=r(2323),d=r(11741),u=r(91386),x=r(54456),h=r(17162),p=r(97494),m=r(94013),f=r(46387),b=r(73261),g=r(42425),j=r(71250),y=r(93485),Z=r(43688),v=r(42438),w=r(20026),k=r(15631),S=r(99465),C=r(23208),E=r(53980),P=r(59832),F=r(82156),I=r(31691),L=r(99376),A=r(71524),D=r(66894),N=r(29946),W=r(29392),O=r(42581),R=r(41932),_=r(94574),z=r(38569),H=r(70412),U=r(93679),B=r(14084);B.kL.register(B.uw,B.f$,B.ZL,B.qi,B.od,B.jn,B.Dx,B.u,B.De),A.default,D.default,N.default,W.default,O.default,R.default,_.default,z.default,H.default,U.default,N.default;let J={sidebar:"#FFFFFF",text:"#222222",border:"#E0E0E0",primary:"#1976d2"};var Y={src:"/_next/static/media/logo.7f01b434.svg",height:595,width:842,blurWidth:0,blurHeight:0};let G=[{title:"Home",items:[{text:"Home",icon:(0,i.jsx)(g.Z,{}),path:"/dashboard"}]},{title:"Administrativo",items:[{text:"Gest\xe3o",icon:(0,i.jsx)(y.Z,{}),path:"/gestao"},{text:"Financeiro",icon:(0,i.jsx)(j.Z,{}),path:"/financeiro"}]},{title:"Geral",items:[{text:"Comercial",icon:(0,i.jsx)(Z.Z,{}),path:"/comercial"},{text:"Customer Success",icon:(0,i.jsx)(v.Z,{}),path:"/customer-success",hasSubmenu:!0},{text:"Administrativo",icon:(0,i.jsx)(k.Z,{}),path:"/administrativo"}]}],Q=[{text:"Geral",path:"/customer-success/geral"},{text:"Financeiro",path:"/customer-success/financeiro"},{text:"Atendimentos",path:"/customer-success/atendimentos"}];function T(){let e=(0,I.Z)(),t=(0,F.Z)(e.breakpoints.down("sm")),[r,g]=a.useState(!1),[j,y]=a.useState(!1),[Z,v]=a.useState(!1),k=(0,L.useRouter)(),A=(0,L.usePathname)(),{logout:D}=(0,s.a)();if(a.useEffect(()=>{v(!0),(null==A?void 0:A.startsWith("/customer-success"))&&y(!0)},[A]),!Z)return(0,i.jsx)("div",{});let N=async()=>{try{await D(),k.push("/login")}catch(e){console.error("Erro ao fazer logout:",e)}};return t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(P.Z,{onClick:()=>g(!0),sx:{position:"fixed",top:16,left:16,zIndex:2e3,color:J.text},children:(0,i.jsx)(S.Z,{fontSize:"large"})}),(0,i.jsxs)(n.ZP,{anchor:"left",open:r,onClose:()=>g(!1),PaperProps:{sx:{background:J.sidebar,color:J.text,width:220}},children:[(0,i.jsx)(o.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:2},children:(0,i.jsx)("img",{src:Y,alt:"Resoluty Logo",style:{height:40}})}),(0,i.jsxs)(o.Z,{sx:{px:2,display:"flex",flexDirection:"column",height:"100%"},children:[(0,i.jsx)(o.Z,{sx:{flex:1},children:G.map(e=>(0,i.jsxs)(l.Z,{sx:{mb:2},children:[(0,i.jsx)(c.Z,{disableSticky:!0,sx:{background:"transparent",color:J.text,fontWeight:700},children:e.title}),e.items.map(e=>(0,i.jsxs)(a.Fragment,{children:[(0,i.jsxs)(d.Z,{onClick:()=>{e.hasSubmenu?y(!j):(g(!1),k.push(e.path))},sx:{pl:2,mb:.5,borderRadius:1,"&:hover":{background:J.border},background:A===e.path?J.primary:"transparent",color:J.text,display:"flex",alignItems:"center",gap:2},component:"li",children:[(0,i.jsx)(u.Z,{sx:{minWidth:36,color:J.text},children:e.icon}),(0,i.jsx)(x.Z,{primary:e.text}),e.hasSubmenu&&(j?(0,i.jsx)(C.Z,{}):(0,i.jsx)(E.Z,{}))]}),e.hasSubmenu&&(0,i.jsx)(h.Z,{in:j,timeout:"auto",unmountOnExit:!0,children:(0,i.jsx)(l.Z,{component:"div",disablePadding:!0,children:Q.map(e=>(0,i.jsx)(d.Z,{onClick:()=>{g(!1),k.push(e.path)},sx:{pl:4,"&:hover":{background:J.border},background:A===e.path?J.primary:"transparent"},children:(0,i.jsx)(x.Z,{primary:e.text})},e.text))})})]},e.text))]},e.title))}),(0,i.jsx)(p.Z,{sx:{my:2,borderColor:J.text}}),(0,i.jsx)(m.Z,{fullWidth:!0,variant:"outlined",startIcon:(0,i.jsx)(w.Z,{}),onClick:N,sx:{color:J.text,borderColor:J.text,"&:hover":{borderColor:J.primary,background:J.border}},children:"Sair"})]})]})]}):(0,i.jsx)(n.ZP,{variant:"permanent",open:r,PaperProps:{style:{width:240,background:J.sidebar,color:J.text,borderRight:"1px solid #eee",paddingTop:24}},children:(0,i.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,i.jsx)(o.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:2},children:(0,i.jsx)("img",{src:Y,alt:"Resoluty Logo",style:{height:40}})}),(0,i.jsx)(o.Z,{sx:{px:2,flex:1},children:G.map(e=>(0,i.jsxs)(o.Z,{mb:2,children:[(0,i.jsx)(f.Z,{variant:"body2",color:"textSecondary",fontWeight:500,mb:1,sx:{pl:1},children:e.title}),(0,i.jsx)(l.Z,{disablePadding:!0,children:e.items.map(e=>(0,i.jsxs)(a.Fragment,{children:[(0,i.jsxs)(b.ZP,{onClick:()=>{e.hasSubmenu?y(!j):k.push(e.path)},sx:{pl:2,mb:.5,borderRadius:1,"&:hover":{background:J.border},background:A===e.path?J.primary:"transparent",color:J.text,cursor:"pointer"},component:"li",children:[(0,i.jsx)(u.Z,{sx:{minWidth:36,color:J.text},children:e.icon}),(0,i.jsx)(x.Z,{primary:e.text}),e.hasSubmenu&&(j?(0,i.jsx)(C.Z,{}):(0,i.jsx)(E.Z,{}))]}),e.hasSubmenu&&(0,i.jsx)(h.Z,{in:j,timeout:"auto",unmountOnExit:!0,children:(0,i.jsx)(l.Z,{component:"div",disablePadding:!0,children:Q.map(e=>(0,i.jsx)(b.ZP,{onClick:()=>k.push(e.path),sx:{pl:4,mb:.5,borderRadius:1,"&:hover":{background:J.border},background:A===e.path?J.primary:"transparent",cursor:"pointer"},children:(0,i.jsx)(x.Z,{primary:e.text})},e.text))})})]},e.text))})]},e.title))}),(0,i.jsxs)(o.Z,{sx:{px:2,pb:2},children:[(0,i.jsx)(p.Z,{sx:{mb:2,borderColor:J.text}}),(0,i.jsx)(m.Z,{fullWidth:!0,variant:"outlined",startIcon:(0,i.jsx)(w.Z,{}),onClick:N,sx:{color:J.text,borderColor:J.text,"&:hover":{borderColor:J.primary,background:J.border}},children:"Sair"})]})]})})}function X(e){let{children:t}=e,[r,n]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{n(!0)},[]),r)?(0,i.jsx)(s.H,{children:(0,i.jsxs)("div",{style:{display:"flex"},children:[(0,i.jsx)(T,{}),(0,i.jsx)("div",{style:{flex:1,paddingLeft:240,transition:"padding-left 0.2s"},children:t})]})}):(0,i.jsx)("div",{style:{display:"flex"},children:(0,i.jsx)("div",{style:{flex:1,paddingLeft:240,transition:"padding-left 0.2s"},children:t})})}},99098:function(e,t,r){"use strict";r.d(t,{H:function(){return g},a:function(){return b}});var i=r(57437),s=r(2265),a=r(61466),n=r(738),o=r(5978);let l=(0,n.ZF)({apiKey:"AIzaSyDgFH74k2pOBWnYew00OMVBjnQYXcYzZdY",authDomain:"resolutydashboard.firebaseapp.com",projectId:"resolutydashboard",storageBucket:"resolutydashboard.firebasestorage.app",messagingSenderId:"948695454342",appId:"1:948695454342:web:f0f28af286ef883353f707"}),c=(0,a.v0)(l),d=(0,o.ad)(l);async function u(e){let t=(0,o.JU)(d,"users",e.uid),r={uid:e.uid,email:e.email,displayName:e.displayName||e.email.split("@")[0],role:"member",department:"general",createdAt:(0,o.Bt)(),lastLogin:(0,o.Bt)(),isActive:!0};await (0,o.pl)(t,r,{merge:!0})}async function x(e,t,r){try{let i=(await (0,a.Xb)(c,e,t)).user;return await u({uid:i.uid,email:i.email,displayName:r||i.displayName}),console.log("Usu\xe1rio registrado e perfil Firestore criado:",i.uid),i}catch(e){throw console.error("Erro no registro:",e.message),e}}async function h(e,t){try{let r=(await (0,a.e5)(c,e,t)).user;return await u({uid:r.uid,email:r.email,displayName:r.displayName}),console.log("Usu\xe1rio logado:",r.uid),r}catch(e){throw console.error("Erro no login:",e.message),e}}async function p(e){try{let t=(0,o.JU)(d,"users",e),r=await (0,o.QT)(t);if(r.exists())return r.data();return null}catch(e){throw console.error("Erro ao buscar perfil do usu\xe1rio:",e),e}}async function m(e,t){try{let r=(0,o.hJ)(d,"users"),i=(0,o.IO)(r,(0,o.ar)("uid","==",e)),s=await (0,o.PL)(i);if(s.empty)throw Error("Documento com UID ".concat(e," n\xe3o encontrado"));let a=s.docs[0],n=(0,o.JU)(d,"users",a.id);await (0,o.r7)(n,{...t,lastLogin:new Date})}catch(e){throw console.error("Erro ao atualizar perfil do usu\xe1rio:",e),e}}let f=(0,s.createContext)(void 0);function b(){let e=(0,s.useContext)(f);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function g(e){let{children:t}=e,[r,n]=(0,s.useState)(null),[o,l]=(0,s.useState)(null),[d,u]=(0,s.useState)(!0);async function b(e,t){return await h(e,t)}async function g(e,t){return await x(e,t)}async function j(){await (0,a.w7)(c)}async function y(e){await (0,a.LS)(c,e)}async function Z(e){r&&(await m(r.uid,e),l(t=>t?{...t,...e}:null))}return(0,s.useEffect)(()=>(0,a.Aj)(c,async e=>{if(n(e),e)try{let t=await p(e.uid);l(t)}catch(e){console.error("Erro ao carregar perfil do usu\xe1rio:",e),l(null)}else l(null);u(!1)}),[]),(0,i.jsx)(f.Provider,{value:{currentUser:r,userProfile:o,login:b,signup:g,logout:j,resetPassword:y,updateProfile:Z,loading:d},children:!d&&t})}}},function(e){e.O(0,[674,609,210,545,153,538,708,12,971,117,744],function(){return e(e.s=19463)}),_N_E=e.O()}]);